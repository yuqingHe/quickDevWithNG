define(["ionic","moduleApp","remlib","ocLazyLoad","commonServices","routeState"],function(){return angular.module("BaseApp",["ionic","moduleApp","commonServices","oc.lazyLoad"]).config(["$urlRouterProvider","$ionicConfigProvider","$locationProvider","$ocLazyLoadProvider",function($urlRouterProvider,$ionicConfigProvider,$locationProvider,$ocLazyLoadProvider){$ionicConfigProvider.platform.android.tabs.style("bottom"),$ionicConfigProvider.platform.android.tabs.position("bottom"),ionic.Platform.isFullScreen=!0,$ionicConfigProvider.scrolling.jsScrolling(!0),$ionicConfigProvider.views.transition("none"),window.isAllowDirectShare&&$locationProvider.html5Mode(!0),$ocLazyLoadProvider.config({jsLoader:requirejs,debug:!0})}]).run(["$rootScope","$state","$stateParams","$ionicPlatform","$ocLazyLoad",function($rootScope,$state,$stateParams,$ionicPlatform,$ocLazyLoad){$rootScope.$state=$state;var func_go=$state.go,getUrlAnchor=function(){var url=window.location.href,state="",splitPosition=url.indexOf("#");return splitPosition>0&&(state=url.substring(splitPosition+1)),state},getStatesByPath=function(state){var pointPosition=0,states=[];do pointPosition=state.indexOf(".",pointPosition+1),pointPosition>-1&&states.push(state.substring(0,pointPosition));while(state.indexOf(".",pointPosition+1)>0);return states.push(state),states},doLazyLoadAndGO=function(state,module,params,option){var states=getStatesByPath(state),modules=$rootScope.routeState.getModuleByStates(states),relyModules=$rootScope.routeState.getRelyModuleByModules(modules);$ocLazyLoad.load(modules.concat(relyModules)).then(function(){func_go(state,params,option)},function(e){console.log(e)})};requirejs(["routeState"],function(routeState){var indexModule="indexapp",indexState="/index",configIndexObj=routeState.indexModule,anchorState=getUrlAnchor();$rootScope.routeState=routeState,anchorState?(indexState=anchorState,indexModule=routeState.getModuleByState(indexState)):configIndexObj&&(indexModule=configIndexObj.moduleName?configIndexObj.moduleName:indexModule,indexState=configIndexObj.state?configIndexObj.state:indexState),doLazyLoadAndGO(indexState,indexModule)}),$state.go=function(state,params,option){var module=$rootScope.routeState.getModuleByState(state);if(!module){console.log("模块跳转出错,出错的路由为"+state);return}doLazyLoadAndGO(state,module);return},$rootScope.$stateParams=$stateParams,window.changeFontSizeNewMicoSite(),$ionicPlatform.ready(function(){ionic.keyboard.disable()})}]).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(["$q","$rootScope",function($q,$rootScope){return{request:function(config){var urlArgs="version="+(new Date).getTime(),baseUrl="";typeof requirejs!="undefined"&&(urlArgs=requirejs.s.contexts._.config.urlArgs,baseUrl=requirejs.s.contexts._.config.baseUrl);if(config.method=="GET")if(config.url.indexOf(".html")!==-1||config.url.indexOf(".htm")!==-1){baseUrl="/app/";var separator=config.url.indexOf("?")===-1?"?":"&";config.url=baseUrl+config.url}return config}}}])}])});