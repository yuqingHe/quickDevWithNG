(function(angular,window){"use strict";var regModules=["ng","oc.lazyLoad"],regInvokes={},regConfigs=[],modulesToLoad=[],realModules=[],recordDeclarations=[],broadcast=angular.noop,runBlocks={},justLoaded=[],ocLazyLoad=angular.module("oc.lazyLoad",["ng"]);ocLazyLoad.provider("$ocLazyLoad",["$controllerProvider","$provide","$compileProvider","$filterProvider","$injector","$animateProvider",function($controllerProvider,$provide,$compileProvider,$filterProvider,$injector,$animateProvider){function _register(providers,registerModules,params){if(registerModules){var k,moduleName,moduleFn,tempRunBlocks=[];for(k=registerModules.length-1;k>=0;k--){moduleName=registerModules[k],angular.isString(moduleName)||(moduleName=getModuleName(moduleName));if(!moduleName||justLoaded.indexOf(moduleName)!==-1||modules[moduleName]&&realModules.indexOf(moduleName)===-1)continue;var newModule=regModules.indexOf(moduleName)===-1;moduleFn=ngModuleFct(moduleName),newModule&&(regModules.push(moduleName),_register(providers,moduleFn.requires,params));if(moduleFn._runBlocks.length>0){runBlocks[moduleName]=[];while(moduleFn._runBlocks.length>0)runBlocks[moduleName].push(moduleFn._runBlocks.shift())}angular.isDefined(runBlocks[moduleName])&&(newModule||params.rerun)&&(tempRunBlocks=tempRunBlocks.concat(runBlocks[moduleName])),_invokeQueue(providers,moduleFn._invokeQueue,moduleName,params.reconfig),_invokeQueue(providers,moduleFn._configBlocks,moduleName,params.reconfig),broadcast(newModule?"ocLazyLoad.moduleLoaded":"ocLazyLoad.moduleReloaded",moduleName),registerModules.pop(),justLoaded.push(moduleName)}var instanceInjector=providers.getInstanceInjector();angular.forEach(tempRunBlocks,function(fn){instanceInjector.invoke(fn)})}}function _registerInvokeList(args,moduleName){function checkHashes(potentialNew,invokes){var isNew=!0,newHash;return invokes.length&&(newHash=signature(potentialNew),angular.forEach(invokes,function(invoke){isNew=isNew&&signature(invoke)!==newHash})),isNew}function signature(data){return angular.isArray(data)?hashCode(data.toString()):angular.isObject(data)?hashCode(stringify(data)):angular.isDefined(data)&&data!==null?hashCode(data.toString()):data}var invokeList=args[2][0],type=args[1],newInvoke=!1;angular.isUndefined(regInvokes[moduleName])&&(regInvokes[moduleName]={}),angular.isUndefined(regInvokes[moduleName][type])&&(regInvokes[moduleName][type]={});var onInvoke=function onInvoke(invokeName,invoke){regInvokes[moduleName][type].hasOwnProperty(invokeName)||(regInvokes[moduleName][type][invokeName]=[]),checkHashes(invoke,regInvokes[moduleName][type][invokeName])&&(newInvoke=!0,regInvokes[moduleName][type][invokeName].push(invoke),broadcast("ocLazyLoad.componentLoaded",[moduleName,type,invokeName]))};if(angular.isString(invokeList))onInvoke(invokeList,args[2][1]);else{if(!angular.isObject(invokeList))return!1;angular.forEach(invokeList,function(invoke,key){angular.isString(invoke)?onInvoke(invoke,invokeList[1]):onInvoke(key,invoke)})}return newInvoke}function _invokeQueue(providers,queue,moduleName,reconfig){if(!queue)return;var i,len,args,provider;for(i=0,len=queue.length;i<len;i++){args=queue[i];if(angular.isArray(args)){if(providers!==null){if(!providers.hasOwnProperty(args[0]))throw new Error("unsupported provider "+args[0]);provider=providers[args[0]]}var isNew=_registerInvokeList(args,moduleName);if(args[1]!=="invoke")isNew&&angular.isDefined(provider)&&provider[args[1]].apply(provider,args[2]);else{var callInvoke=function callInvoke(fct){var invoked=regConfigs.indexOf(moduleName+"-"+fct);if(invoked===-1||reconfig)invoked===-1&&regConfigs.push(moduleName+"-"+fct),angular.isDefined(provider)&&provider[args[1]].apply(provider,args[2])};if(angular.isFunction(args[2][0]))callInvoke(args[2][0]);else if(angular.isArray(args[2][0]))for(var j=0,jlen=args[2][0].length;j<jlen;j++)angular.isFunction(args[2][0][j])&&callInvoke(args[2][0][j])}}}}function getModuleName(module){var moduleName=null;return angular.isString(module)?moduleName=module:angular.isObject(module)&&module.hasOwnProperty("name")&&angular.isString(module.name)&&(moduleName=module.name),moduleName}function moduleExists(moduleName){if(!angular.isString(moduleName))return!1;try{return ngModuleFct(moduleName)}catch(e){if(/No module/.test(e)||e.message.indexOf("$injector:nomod")>-1)return!1}}var modules={},providers={$controllerProvider:$controllerProvider,$compileProvider:$compileProvider,$filterProvider:$filterProvider,$provide:$provide,$injector:$injector,$animateProvider:$animateProvider},debug=!1,events=!1,moduleCache=[],modulePromises={};moduleCache.push=function(value){this.indexOf(value)===-1&&Array.prototype.push.apply(this,arguments)},this.config=function(config){angular.isDefined(config.modules)&&(angular.isArray(config.modules)?angular.forEach(config.modules,function(moduleConfig){modules[moduleConfig.name]=moduleConfig}):modules[config.modules.name]=config.modules),angular.isDefined(config.debug)&&(debug=config.debug),angular.isDefined(config.events)&&(events=config.events)},this._init=function _init(element){if(modulesToLoad.length===0){var elements=[element],names=["ng:app","ng-app","x-ng-app","data-ng-app"],NG_APP_CLASS_REGEXP=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/,append=function append(elm){return elm&&elements.push(elm)};angular.forEach(names,function(name){names[name]=!0,append(document.getElementById(name)),name=name.replace(":","\\:"),typeof element[0]!="undefined"&&element[0].querySelectorAll&&(angular.forEach(element[0].querySelectorAll("."+name),append),angular.forEach(element[0].querySelectorAll("."+name+"\\:"),append),angular.forEach(element[0].querySelectorAll("["+name+"]"),append))}),angular.forEach(elements,function(elm){if(modulesToLoad.length===0){var className=" "+element.className+" ",match=NG_APP_CLASS_REGEXP.exec(className);match?modulesToLoad.push((match[2]||"").replace(/\s+/g,",")):angular.forEach(elm.attributes,function(attr){modulesToLoad.length===0&&names[attr.name]&&modulesToLoad.push(attr.value)})}})}modulesToLoad.length===0&&(!window.jasmine&&!window.mocha||!angular.isDefined(angular.mock))&&console.error("No module found during bootstrap, unable to init ocLazyLoad. You should always use the ng-app directive or angular.boostrap when you use ocLazyLoad.");var addReg=function addReg(moduleName){if(regModules.indexOf(moduleName)===-1){regModules.push(moduleName);var mainModule=angular.module(moduleName);_invokeQueue(null,mainModule._invokeQueue,moduleName),_invokeQueue(null,mainModule._configBlocks,moduleName),angular.forEach(mainModule.requires,addReg)}};angular.forEach(modulesToLoad,function(moduleName){addReg(moduleName)}),modulesToLoad=[],recordDeclarations.pop()};var stringify=function stringify(obj){try{return JSON.stringify(obj)}catch(e){var cache=[];return JSON.stringify(obj,function(key,value){if(angular.isObject(value)&&value!==null){if(cache.indexOf(value)!==-1)return;cache.push(value)}return value})}},hashCode=function hashCode(str){var hash=0,i,chr,len;if(str.length==0)return hash;for(i=0,len=str.length;i<len;i++)chr=str.charCodeAt(i),hash=(hash<<5)-hash+chr,hash|=0;return hash};this.$get=["$log","$rootElement","$rootScope","$cacheFactory","$q",function($log,$rootElement,$rootScope,$cacheFactory,$q){function reject(e){var deferred=$q.defer();return $log.error(e.message),deferred.reject(e),deferred.promise}var instanceInjector,filesCache=$cacheFactory("ocLazyLoad");return debug||($log={},$log.error=angular.noop,$log.warn=angular.noop,$log.info=angular.noop),providers.getInstanceInjector=function(){return instanceInjector?instanceInjector:instanceInjector=$rootElement.data("$injector")||angular.injector()},broadcast=function broadcast(eventName,params){events&&$rootScope.$broadcast(eventName,params),debug&&$log.info(eventName,params)},{_broadcast:broadcast,_$log:$log,_getFilesCache:function getFilesCache(){return filesCache},toggleWatch:function toggleWatch(watch){watch?recordDeclarations.push(!0):recordDeclarations.pop()},getModuleConfig:function getModuleConfig(moduleName){if(!angular.isString(moduleName))throw new Error("You need to give the name of the module to get");return modules[moduleName]?angular.copy(modules[moduleName]):null},setModuleConfig:function setModuleConfig(moduleConfig){if(!angular.isObject(moduleConfig))throw new Error("You need to give the module config object to set");return modules[moduleConfig.name]=moduleConfig,moduleConfig},getModules:function getModules(){return regModules},isLoaded:function isLoaded(modulesNames){var moduleLoaded=function moduleLoaded(module){var isLoaded=regModules.indexOf(module)>-1;return isLoaded||(isLoaded=!!moduleExists(module)),isLoaded};angular.isString(modulesNames)&&(modulesNames=[modulesNames]);if(angular.isArray(modulesNames)){var i,len;for(i=0,len=modulesNames.length;i<len;i++)if(!moduleLoaded(modulesNames[i]))return!1;return!0}throw new Error("You need to define the module(s) name(s)")},_getModuleName:getModuleName,_getModule:function getModule(moduleName){try{return ngModuleFct(moduleName)}catch(e){if(/No module/.test(e)||e.message.indexOf("$injector:nomod")>-1)e.message='The module "'+stringify(moduleName)+'" that you are trying to load does not exist. '+e.message;throw e}},moduleExists:moduleExists,_loadDependencies:function _loadDependencies(moduleName,localParams){var loadedModule,requires,diff,promisesList=[],self=this;moduleName=self._getModuleName(moduleName);if(moduleName===null)return $q.when();try{loadedModule=self._getModule(moduleName)}catch(e){return reject(e)}return requires=self.getRequires(loadedModule),angular.forEach(requires,function(requireEntry){if(angular.isString(requireEntry)){var config=self.getModuleConfig(requireEntry);if(config===null){moduleCache.push(requireEntry);return}requireEntry=config,config.name=undefined}if(self.moduleExists(requireEntry.name)){diff=requireEntry.files.filter(function(n){return self.getModuleConfig(requireEntry.name).files.indexOf(n)<0}),diff.length!==0&&self._$log.warn('Module "',moduleName,'" attempted to redefine configuration for dependency. "',requireEntry.name,'"\n Additional Files Loaded:',diff);if(!angular.isDefined(self.filesLoader))return reject(new Error("Error: New dependencies need to be loaded from external files ("+requireEntry.files+"), but no loader has been defined."));promisesList.push(self.filesLoader(requireEntry,localParams).then(function(){return self._loadDependencies(requireEntry)}));return}if(angular.isArray(requireEntry)){var files=[];angular.forEach(requireEntry,function(entry){var config=self.getModuleConfig(entry);config===null?files.push(entry):config.files&&(files=files.concat(config.files))}),files.length>0&&(requireEntry={files:files})}else angular.isObject(requireEntry)&&requireEntry.hasOwnProperty("name")&&requireEntry.name&&(self.setModuleConfig(requireEntry),moduleCache.push(requireEntry.name));if(angular.isDefined(requireEntry.files)&&requireEntry.files.length!==0){if(!angular.isDefined(self.filesLoader))return reject(new Error('Error: the module "'+requireEntry.name+'" is defined in external files ('+requireEntry.files+"), but no loader has been defined."));promisesList.push(self.filesLoader(requireEntry,localParams).then(function(){return self._loadDependencies(requireEntry)}))}}),$q.all(promisesList)},inject:function inject(moduleName){var localParams=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],real=arguments.length<=2||arguments[2]===undefined?!1:arguments[2],self=this,deferred=$q.defer();if(angular.isDefined(moduleName)&&moduleName!==null){if(angular.isArray(moduleName)){var promisesList=[];return angular.forEach(moduleName,function(module){promisesList.push(self.inject(module,localParams,real))}),$q.all(promisesList)}self._addToLoadList(self._getModuleName(moduleName),!0,real)}if(modulesToLoad.length>0){var res=modulesToLoad.slice(),loadNext=function loadNext(moduleName){moduleCache.push(moduleName),modulePromises[moduleName]=deferred.promise,self._loadDependencies(moduleName,localParams).then(function success(){try{justLoaded=[],_register(providers,moduleCache,localParams)}catch(e){self._$log.error(e.message),deferred.reject(e);return}modulesToLoad.length>0?loadNext(modulesToLoad.shift()):deferred.resolve(res)},function error(err){deferred.reject(err)})};loadNext(modulesToLoad.shift())}else{if(localParams&&localParams.name&&modulePromises[localParams.name])return modulePromises[localParams.name];deferred.resolve()}return deferred.promise},getRequires:function getRequires(module){var requires=[];return angular.forEach(module.requires,function(requireModule){regModules.indexOf(requireModule)===-1&&requires.push(requireModule)}),requires},_invokeQueue:_invokeQueue,_registerInvokeList:_registerInvokeList,_register:_register,_addToLoadList:_addToLoadList,_unregister:function _unregister(modules){angular.isDefined(modules)&&angular.isArray(modules)&&angular.forEach(modules,function(module){regInvokes[module]=undefined})}}}],this._init(angular.element(window.document))}]);var bootstrapFct=angular.bootstrap;angular.bootstrap=function(element,modules,config){return angular.forEach(modules.slice(),function(module){_addToLoadList(module,!0,!0)}),bootstrapFct(element,modules,config)};var _addToLoadList=function _addToLoadList(name,force,real){(recordDeclarations.length>0||force)&&angular.isString(name)&&modulesToLoad.indexOf(name)===-1&&(modulesToLoad.push(name),real&&realModules.push(name))},ngModuleFct=angular.module;angular.module=function(name,requires,configFn){return _addToLoadList(name,!1,!0),ngModuleFct(name,requires,configFn)},typeof module!="undefined"&&typeof exports!="undefined"&&module.exports===exports&&(module.exports="oc.lazyLoad")})(angular,window);